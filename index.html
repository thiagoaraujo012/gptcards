<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Enviar JSON para JIRA via Webhook</title>
</head>
<body>
  <h2>Formul√°rio para criar card no JIRA</h2>
  <textarea id="jsonInput" rows="20" cols="80" placeholder='{
  "title": "Disable PayPal as Payment Method for Customers in the Netherlands",
  "context": "Data shows that approximately 14% of customers in the Netherlands face issues when selecting PayPal during checkout. This contributes negatively to both the success rate and customer retention.",
  "objective": "Prevent customers located in the Netherlands from selecting PayPal as a payment method, in order to reduce payment friction and lower churn.",
  "scope": [
    "Identify customer location based on IP or account settings",
    "Hide PayPal option in the checkout flow for customers in the Netherlands",
    "Maintain PayPal visibility and functionality in all other countries"
  ],
  "out_of_scope": [
    "Modifying the PayPal SDK integration",
    "Changes to non-checkout flows"
  ],
  "acceptance_criteria": [
    {
      "scenario": "User in the Netherlands proceeds to checkout",
      "given": "the user is located in the Netherlands",
      "when": "they reach the payment method selection screen",
      "then": "the PayPal option should not be displayed"
    },
    {
      "scenario": "User in another country proceeds to checkout",
      "given": "the user is located outside the Netherlands",
      "when": "they reach the payment method selection screen",
      "then": "the PayPal option should be displayed as usual"
    }
  ],
  "technical_requirements": [
    "Update payment method eligibility logic in the frontend and backend",
    "Geo-targeting based on IP or user profile locale",
    "Validate fallback behavior for edge cases (e.g. VPN, incorrect geolocation)",
    "Add monitoring for disabled payment options per region"
  ],
  "design": "No visual updates needed unless fallback UI is required.",
  "metrics": [
    "% of users in the Netherlands seeing PayPal option (should drop to 0%)",
    "Checkout success rate in the Netherlands before vs. after change",
    "Customer support tickets related to payment issues"
  ],
  "dependencies": [
    "Backend support to filter payment options by country",
    "QA validation for geo-specific flows",
    "Approval from Legal/Compliance if necessary due to geo-targeting"
  ]
}
'></textarea>
  <br>
  <button onclick="enviarParaWebhook()">Enviar</button>

  <p id="status"></p>

  <script>
    async function enviarParaWebhook() {
      const status = document.getElementById("status");
      const input = document.getElementById("jsonInput").value;

      let jsonData;

      try {
        jsonData = JSON.parse(input);
        console.log("üì¶ JSON pronto para envio:", jsonData);
      } catch (e) {
        status.innerText = "‚ùå JSON inv√°lido. Corrija e tente novamente.";
        return;
      }

      try {
        const response = await fetch("https://thiagoa012.app.n8n.cloud/webhook/gpt-to-jira", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(jsonData)
        });

        if (response.ok) {
          status.innerText = "‚úÖ Card criado com sucesso!";
        } else {
          status.innerText = `‚ùå Erro ao criar card: ${response.status}`;
        }
      } catch (err) {
        status.innerText = "‚ùå Erro ao conectar ao webhook.";
        console.error("Erro:", err);
      }
    }
  </script>
</body>
</html>
